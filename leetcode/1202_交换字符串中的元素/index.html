<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">

    
<link rel="stylesheet" href="/blog-theme/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/blog-theme/css/global.css">

    
<link rel="stylesheet" href="/blog-theme/css/article.css">

    
    
<script src="/blog-theme/bootstrap/js/bootstrap.bundle.min.js"></script>


    <title>
        I&#39;m prime
    </title>
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="bg-dark">
    <header>
    <nav class="navbar navbar-expand navbar-expand-lg navbar-dark sticky-top shadow">
        <div class="container-fluid">
            <a class="navbar-brand" href="/blog-theme/">

                

            I&#39;m prime
            </a>

            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">

                    

                        <li class="nav-item">
                            <a class="nav-link " aria-current="page"
                                href="/blog-theme/">
                                主页
                            </a>
                        </li>

                    

                        <li class="nav-item">
                            <a class="nav-link " aria-current="page"
                                href="/blog-theme/archives/">
                                归档
                            </a>
                        </li>

                    

                </ul>
            </div>
        </div>
    </nav>
</header>
    <div class="container-fluid mt-md-5">
    <div class="row">
        <div class="col"></div>
        <div class="col-12 col-sm-10 col-md-8 col-lg-7 col-xl-5 shadow-lg">
            <div class="container-fluid mt-5 text-center">
                <h1 class="text-white">
                    1202. 交换字符串中的元素(每日一题)
                </h1>
                <p class="mt-2 text-secondary">
                    2021.01.11
                </p>
            </div>

            <article class="container-fluid text-white">
                <h2 id="leetcode-笔记"><a href="#leetcode-笔记" class="headerlink" title="leetcode 笔记"></a><a href="https://lzyprime.github.io/leetcode/leetcode">leetcode 笔记</a></h2><hr>
<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>给你一个字符串 s，以及该字符串中的一些「索引对」数组 pairs，其中 pairs[i] = [a, b] 表示字符串中的两个索引（编号从 0 开始）。</p>
<p>你可以 任意多次交换 在 pairs 中任意一对索引处的字符。</p>
<p>返回在经过若干次交换后，s 可以变成的按字典序最小的字符串。</p>
<p> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">示例 1:</span><br><span class="line"></span><br><span class="line">输入：s = &quot;dcab&quot;, pairs = [[0,3],[1,2]]</span><br><span class="line">输出：&quot;bacd&quot;</span><br><span class="line">解释： </span><br><span class="line">交换 s[0] 和 s[3], s = &quot;bcad&quot;</span><br><span class="line">交换 s[1] 和 s[2], s = &quot;bacd&quot;</span><br><span class="line">示例 2：</span><br><span class="line"></span><br><span class="line">输入：s = &quot;dcab&quot;, pairs = [[0,3],[1,2],[0,2]]</span><br><span class="line">输出：&quot;abcd&quot;</span><br><span class="line">解释：</span><br><span class="line">交换 s[0] 和 s[3], s = &quot;bcad&quot;</span><br><span class="line">交换 s[0] 和 s[2], s = &quot;acbd&quot;</span><br><span class="line">交换 s[1] 和 s[2], s = &quot;abcd&quot;</span><br><span class="line">示例 3：</span><br><span class="line"></span><br><span class="line">输入：s = &quot;cba&quot;, pairs = [[0,1],[1,2]]</span><br><span class="line">输出：&quot;abc&quot;</span><br><span class="line">解释：</span><br><span class="line">交换 s[0] 和 s[1], s = &quot;bca&quot;</span><br><span class="line">交换 s[1] 和 s[2], s = &quot;bac&quot;</span><br><span class="line">交换 s[0] 和 s[1], s = &quot;abc&quot;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">提示：</span><br><span class="line"></span><br><span class="line">1 &lt;= s.length &lt;= 10^5</span><br><span class="line">0 &lt;= pairs.length &lt;= 10^5</span><br><span class="line">0 &lt;= pairs[i][0], pairs[i][1] &lt; s.length</span><br><span class="line">s 中只含有小写英文字母</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/smallest-string-with-swaps">https://leetcode-cn.com/problems/smallest-string-with-swaps</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><p>并查集。 给定[a, b], [b, c] 则 a, b, c 位置可随意调换。所以把连通的全部找出来，每条链排小序。</p>
<ul>
<li><h3 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h3></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function">string <span class="title">smallestStringWithSwaps</span><span class="params">(string s, vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; pairs)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> size = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">par</span><span class="params">(size, <span class="number">-1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; i : pairs) par[<span class="built_in">find_parent</span>(par, i[<span class="number">0</span>])] = <span class="built_in">find_parent</span>(par, i[<span class="number">1</span>]);</span><br><span class="line">    unordered_map&lt;<span class="keyword">int</span>, vector&lt;<span class="keyword">int</span>&gt;&gt; mp;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">      <span class="keyword">if</span> (par[i] != <span class="number">-1</span>) mp[<span class="built_in">find_parent</span>(par, i)].<span class="built_in">push_back</span>(i);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; i : mp) &#123;</span><br><span class="line">      vector&lt;<span class="keyword">char</span>&gt; tmp;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j : i.second) tmp.<span class="built_in">push_back</span>(s[j]);</span><br><span class="line">      <span class="built_in">sort</span>(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> ti = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j : i.second) s[j] = tmp[ti++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">find_parent</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; par, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (par[x] != <span class="number">-1</span> &amp;&amp; par[x] != x)</span><br><span class="line">      <span class="keyword">return</span> par[x] = <span class="built_in">find_parent</span>(par, par[x]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> par[x] = x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="kotlin"><a href="#kotlin" class="headerlink" title="kotlin"></a>kotlin</h3></li>
</ul>
<p>一刀流。 逻辑复杂，不太适合一刀</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">smallestStringWithSwaps</span><span class="params">(s: <span class="type">String</span>, pairs: <span class="type">List</span>&lt;<span class="type">List</span>&lt;<span class="type">Int</span>&gt;&gt;)</span></span>: String = String(s.toCharArray().apply &#123; pairs.fold(Array(s.length) &#123; -<span class="number">1</span> &#125;) &#123; par, i -&gt; par[par.findParent(i[<span class="number">0</span>])] = par.findParent(i[<span class="number">1</span>]);par &#125;.let &#123; par -&gt; par.indices.fold(mutableMapOf&lt;<span class="built_in">Int</span>, MutableList&lt;<span class="built_in">Int</span>&gt;&gt;()) &#123; acc, i -&gt; <span class="keyword">if</span> (par[i] != -<span class="number">1</span>) acc.getOrPut(par.findParent(i)) &#123; mutableListOf() &#125;.add(i);acc &#125; &#125;.forEach &#123; (_, l) -&gt; l.zip(l.map &#123; s[it] &#125;.sorted()).forEach &#123; (i, v) -&gt; <span class="keyword">this</span>[i] = v &#125; &#125; &#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> Array<span class="type">&lt;Int&gt;</span>.<span class="title">findParent</span><span class="params">(x: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>[x] != -<span class="number">1</span> &amp;&amp; <span class="keyword">this</span>[x] != x) <span class="keyword">this</span>[x] = findParent(<span class="keyword">this</span>[x]) <span class="keyword">else</span> <span class="keyword">this</span>[x] = x</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>[x]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">smallestStringWithSwaps</span><span class="params">(s: <span class="type">String</span>, pairs: <span class="type">List</span>&lt;<span class="type">List</span>&lt;<span class="type">Int</span>&gt;&gt;)</span></span>: String = String(</span><br><span class="line">        s.toCharArray().apply &#123;</span><br><span class="line">            pairs.fold(Array(s.length) &#123; -<span class="number">1</span> &#125;) &#123; par, i -&gt;</span><br><span class="line">                par[par.findParent(i[<span class="number">0</span>])] = par.findParent(i[<span class="number">1</span>])</span><br><span class="line">                par</span><br><span class="line">            &#125;.let &#123; par -&gt;</span><br><span class="line">                par.indices.fold(mutableMapOf&lt;<span class="built_in">Int</span>, MutableList&lt;<span class="built_in">Int</span>&gt;&gt;()) &#123; acc, i -&gt;</span><br><span class="line">                    <span class="keyword">if</span> (par[i] != -<span class="number">1</span>) acc.getOrPut(par.findParent(i)) &#123; mutableListOf() &#125;.add(i)</span><br><span class="line">                    acc</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;.forEach &#123; (_, l) -&gt;</span><br><span class="line">                l.zip(l.map &#123; s[it] &#125;.sorted()).forEach &#123; (i, v) -&gt; <span class="keyword">this</span>[i] = v &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="scala"><a href="#scala" class="headerlink" title="scala"></a>scala</h3></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">smallestStringWithSwaps</span></span>(s: <span class="type">String</span>, pairs: <span class="type">List</span>[<span class="type">List</span>[<span class="type">Int</span>]]): <span class="type">String</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find_parent</span></span>(par: <span class="type">Array</span>[<span class="type">Int</span>], x: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      par(x) = <span class="keyword">if</span> (par(x) != <span class="number">-1</span> &amp;&amp; par(x) != x) find_parent(par, par(x)) <span class="keyword">else</span> x</span><br><span class="line">      par(x)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> par = pairs.foldLeft(<span class="type">Array</span>.fill(s.length)(<span class="number">-1</span>))((par, l) =&gt; &#123;</span><br><span class="line">      par(find_parent(par, l.head)) = find_parent(par, l.last)</span><br><span class="line">      par</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span>.valueOf(</span><br><span class="line">      par.indices.foldLeft(mutable.<span class="type">Map</span>[<span class="type">Int</span>, mutable.<span class="type">ListBuffer</span>[<span class="type">Int</span>]]())((mp, i) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (par(i) != <span class="number">-1</span>) mp.getOrElseUpdate(find_parent(par, par(i)), mutable.<span class="type">ListBuffer</span>()).addOne(i)</span><br><span class="line">        mp</span><br><span class="line">      &#125;).foldLeft(s.toCharArray)((sArray, i) =&gt; &#123;</span><br><span class="line">        i._2.zip(i._2.map(s(_)).sorted).foreach(i =&gt; sArray(i._1) = i._2)</span><br><span class="line">        sArray</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h3></li>
</ul>
<p>函数式：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::collections::HashMap;</span><br><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">smallest_string_with_swaps</span></span>(s: <span class="built_in">String</span>, pairs: <span class="built_in">Vec</span>&lt;<span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;&gt;) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> s = s.into_bytes();</span><br><span class="line">        <span class="keyword">let</span> size = s.len();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fn</span> <span class="title">find_parent</span></span>(par: &amp;<span class="keyword">mut</span> <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;, x: <span class="built_in">usize</span>) -&gt; <span class="built_in">usize</span> &#123;</span><br><span class="line">            par[x] = <span class="keyword">if</span> par[x] != -<span class="number">1</span> &amp;&amp; par[x] != x <span class="keyword">as</span> <span class="built_in">i32</span> &#123;</span><br><span class="line">                find_parent(par, par[x] <span class="keyword">as</span> <span class="built_in">usize</span>) <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                x <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">            &#125;;</span><br><span class="line">            par[x] <span class="keyword">as</span> <span class="built_in">usize</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> par = pairs.iter().fold(<span class="built_in">vec!</span>[-<span class="number">1</span>; s.len()], |<span class="keyword">mut</span> par, i| &#123;</span><br><span class="line">            <span class="keyword">let</span> pi = find_parent(&amp;<span class="keyword">mut</span> par, i[<span class="number">0</span>] <span class="keyword">as</span> <span class="built_in">usize</span>);</span><br><span class="line">            par[pi] = find_parent(&amp;<span class="keyword">mut</span> par, i[<span class="number">1</span>] <span class="keyword">as</span> <span class="built_in">usize</span>) <span class="keyword">as</span> <span class="built_in">i32</span>;</span><br><span class="line">            par</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        (<span class="number">0</span>..size)</span><br><span class="line">            .fold(HashMap::new(), |<span class="keyword">mut</span> mp, i| &#123;</span><br><span class="line">                <span class="keyword">let</span> v = par[i];</span><br><span class="line">                <span class="keyword">if</span> v != -<span class="number">1</span> &#123;</span><br><span class="line">                    mp.entry(find_parent(&amp;<span class="keyword">mut</span> par, v <span class="keyword">as</span> <span class="built_in">usize</span>))</span><br><span class="line">                        .or_insert(<span class="built_in">vec!</span>[])</span><br><span class="line">                        .push(i)</span><br><span class="line">                &#125;</span><br><span class="line">                mp</span><br><span class="line">            &#125;)</span><br><span class="line">            .values()</span><br><span class="line">            .for_each(|l| &#123;</span><br><span class="line">                l.iter()</span><br><span class="line">                    .zip(&#123;</span><br><span class="line">                        <span class="keyword">let</span> <span class="keyword">mut</span> tmp = l.iter().fold(<span class="built_in">vec!</span>[], |<span class="keyword">mut</span> acc, &amp;i| &#123;</span><br><span class="line">                            acc.push(s[i]);</span><br><span class="line">                            acc</span><br><span class="line">                        &#125;);</span><br><span class="line">                        tmp.sort();</span><br><span class="line">                        tmp</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .for_each(|(&amp;i, v)| &#123;</span><br><span class="line">                        s[i] = v;</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">String</span>::from_utf8(s).unwrap()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常规写： </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::collections::HashMap;</span><br><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">smallest_string_with_swaps</span></span>(s: <span class="built_in">String</span>, pairs: <span class="built_in">Vec</span>&lt;<span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;&gt;) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> s = s.into_bytes();</span><br><span class="line">        <span class="keyword">let</span> size = s.len();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fn</span> <span class="title">find_parent</span></span>(par: &amp;<span class="keyword">mut</span> <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;, x: <span class="built_in">usize</span>) -&gt; <span class="built_in">usize</span> &#123;</span><br><span class="line">            par[x] = <span class="keyword">if</span> par[x] != -<span class="number">1</span> &amp;&amp; par[x] != x <span class="keyword">as</span> <span class="built_in">i32</span> &#123;</span><br><span class="line">                find_parent(par, par[x] <span class="keyword">as</span> <span class="built_in">usize</span>) <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                x <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">            &#125;;</span><br><span class="line">            par[x] <span class="keyword">as</span> <span class="built_in">usize</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> par = pairs.iter().fold(<span class="built_in">vec!</span>[-<span class="number">1</span>; s.len()], |<span class="keyword">mut</span> par, i| &#123;</span><br><span class="line">            <span class="keyword">let</span> pi = find_parent(&amp;<span class="keyword">mut</span> par, i[<span class="number">0</span>] <span class="keyword">as</span> <span class="built_in">usize</span>);</span><br><span class="line">            par[pi] = find_parent(&amp;<span class="keyword">mut</span> par, i[<span class="number">1</span>] <span class="keyword">as</span> <span class="built_in">usize</span>) <span class="keyword">as</span> <span class="built_in">i32</span>;</span><br><span class="line">            par</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> mp: HashMap&lt;<span class="built_in">usize</span>, <span class="built_in">Vec</span>&lt;<span class="built_in">usize</span>&gt;&gt; = HashMap::new();</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..size &#123;</span><br><span class="line">            <span class="keyword">let</span> v = par[i];</span><br><span class="line">            <span class="keyword">if</span> v != -<span class="number">1</span> &#123;</span><br><span class="line">                mp.entry(find_parent(&amp;<span class="keyword">mut</span> par, v <span class="keyword">as</span> <span class="built_in">usize</span>))</span><br><span class="line">                    .or_insert(<span class="built_in">vec!</span>[])</span><br><span class="line">                    .push(i)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mp.values().for_each(|l| &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="keyword">mut</span> tmp: <span class="built_in">Vec</span>&lt;<span class="built_in">u8</span>&gt; = l.iter().map(|&amp;i| s[i]).collect();</span><br><span class="line">            tmp.sort();</span><br><span class="line">            l.into_iter().zip(tmp).for_each(|(&amp;i, v)| s[i] = v)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">String</span>::from_utf8(s).unwrap()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
            </article>
        </div>

        <div class="col"></div>
    </div>
</div>
    <footer class="h-25"> footer </footer>
</body>

</html>