<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">

    
<link rel="stylesheet" href="/blog-theme/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/blog-theme/css/global.css">

    
<link rel="stylesheet" href="/blog-theme/css/article.css">

    
    
<script src="/blog-theme/bootstrap/js/bootstrap.bundle.min.js"></script>


    <title>
        I&#39;m prime
    </title>
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="bg-dark">
    <header>
    <nav class="navbar navbar-expand navbar-expand-lg navbar-dark sticky-top shadow">
        <div class="container-fluid">
            <a class="navbar-brand" href="/blog-theme/">

                

            I&#39;m prime
            </a>

            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">

                    

                        <li class="nav-item">
                            <a class="nav-link " aria-current="page"
                                href="/blog-theme/">
                                主页
                            </a>
                        </li>

                    

                        <li class="nav-item">
                            <a class="nav-link " aria-current="page"
                                href="/blog-theme/archives/">
                                归档
                            </a>
                        </li>

                    

                </ul>
            </div>
        </div>
    </nav>
</header>
    <div class="container-fluid mt-md-5">
    <div class="row">
        <div class="col"></div>
        <div class="col-12 col-sm-10 col-md-8 col-lg-7 col-xl-5 shadow-lg">
            <div class="container-fluid mt-5 text-center">
                <h1 class="text-white">
                    387. 字符串中的第一个唯一字符(每日一题)
                </h1>
                <p class="mt-2 text-secondary">
                    2020.12.23
                </p>
            </div>

            <article class="container-fluid text-white">
                <h2 id="leetcode-笔记"><a href="#leetcode-笔记" class="headerlink" title="leetcode 笔记"></a><a href="https://lzyprime.github.io/leetcode/leetcode">leetcode 笔记</a></h2><hr>
<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>给定一个字符串，找到它的第一个不重复的字符，并返回它的索引。如果不存在，则返回 -1。</p>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;leetcode&quot;</span></span><br><span class="line">返回 0</span><br><span class="line"></span><br><span class="line">s = <span class="string">&quot;loveleetcode&quot;</span></span><br><span class="line">返回 2</span><br></pre></td></tr></table></figure>

<p>提示：你可以假定该字符串只包含小写字母。</p>
<blockquote>
<p>来源：力扣（LeetCode）<br> 链接：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/first-unique-character-in-a-string">https://leetcode-cn.com/problems/first-unique-character-in-a-string</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><ul>
<li><h3 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h3></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">firstUniqChar</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">count</span><span class="params">(<span class="number">26</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i : s) count[i - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, size = s.<span class="built_in">size</span>(); i &lt; size; i++)</span><br><span class="line">        <span class="keyword">if</span>(count[s[i] - <span class="string">&#x27;a&#x27;</span>] == <span class="number">1</span>) <span class="keyword">return</span> i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="kotlin"><a href="#kotlin" class="headerlink" title="kotlin"></a>kotlin</h3></li>
</ul>
<p>一刀流</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">firstUniqChar</span><span class="params">(s: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span> = s.fold(IntArray(<span class="number">26</span>)) &#123; acc, c -&gt; acc.also &#123; it[c - <span class="string">&#x27;a&#x27;</span>]++ &#125;&#125;.let &#123; cnt -&gt; s.indexOfFirst &#123; cnt[it - <span class="string">&#x27;a&#x27;</span>] == <span class="number">1</span> &#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">firstUniqChar</span><span class="params">(s: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span> = s.fold(IntArray(<span class="number">26</span>)) &#123; acc, c -&gt;</span><br><span class="line">        acc.also &#123; it[c - <span class="string">&#x27;a&#x27;</span>]++ &#125;</span><br><span class="line">    &#125;.let &#123; cnt -&gt;</span><br><span class="line">        s.indexOfFirst &#123; cnt[it - <span class="string">&#x27;a&#x27;</span>] == <span class="number">1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="scala"><a href="#scala" class="headerlink" title="scala"></a>scala</h3></li>
</ul>
<p>一刀流。 但是这题<code>scala</code>的一刀流没什么优势，纯粹为了一刀而一刀。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">firstUniqChar</span></span>(s: <span class="type">String</span>): <span class="type">Int</span> = s.zipWithIndex.foldLeft(<span class="type">Array</span>.fill(<span class="number">26</span>)((<span class="number">0</span>, <span class="number">0</span>)))((acc, i) =&gt; &#123;acc(i._1 - &#x27;a&#x27;) = (i._2, acc(i._1 - &#x27;a&#x27;)._2 + <span class="number">1</span>); acc&#125;).foldLeft(<span class="number">-1</span>)((acc, i) =&gt; <span class="keyword">if</span>(i._2 == <span class="number">1</span> &amp;&amp; (acc == <span class="number">-1</span> || i._1 &lt; acc)) i._1 <span class="keyword">else</span> acc)</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">firstUniqChar</span></span>(s: <span class="type">String</span>): <span class="type">Int</span> = s.zipWithIndex.foldLeft(<span class="type">Array</span>.fill(<span class="number">26</span>)((<span class="number">0</span>, <span class="number">0</span>)))(</span><br><span class="line">    (acc, i) =&gt; &#123;acc(i._1 - &#x27;a&#x27;) = (i._2, acc(i._1 - &#x27;a&#x27;)._2 + <span class="number">1</span>); acc&#125;</span><br><span class="line">  ).foldLeft(<span class="number">-1</span>)((acc, i) =&gt; <span class="keyword">if</span>(i._2 == <span class="number">1</span> &amp;&amp; (acc == <span class="number">-1</span> || i._1 &lt; acc)) i._1 <span class="keyword">else</span> acc)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常规写</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">firstUniqChar</span></span>(s: <span class="type">String</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> cnt = <span class="type">Array</span>.fill(<span class="number">26</span>)(<span class="number">0</span>)</span><br><span class="line">    s.foreach(ch =&gt; cnt(ch - &#x27;a&#x27;) += <span class="number">1</span>)</span><br><span class="line">    s.indexWhere(ch =&gt; cnt(ch - &#x27;a&#x27;) == <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h3></li>
</ul>
<p>同<code>scala</code>, 一刀流没意义</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">first_uniq_char</span></span>(s: <span class="built_in">String</span>) -&gt; <span class="built_in">i32</span> &#123;s.chars().enumerate().fold(HashMap::new(), |<span class="keyword">mut</span> m, (index, ch)| &#123;m.entry(ch).and_modify(|(_, i): &amp;<span class="keyword">mut</span> (<span class="built_in">usize</span>, <span class="built_in">i32</span>)| *i += <span class="number">1</span>).or_insert((index, <span class="number">1</span>));m&#125;).values().fold(-<span class="number">1</span>, |ans, &amp;(index, count)| &#123;<span class="keyword">if</span> count == <span class="number">1</span> &amp;&amp; (ans == -<span class="number">1</span> || (index <span class="keyword">as</span> <span class="built_in">i32</span>) &lt; ans) &#123;index <span class="keyword">as</span> <span class="built_in">i32</span>&#125; <span class="keyword">else</span> &#123;ans&#125;&#125;)&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::collections::HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">first_uniq_char</span></span>(s: <span class="built_in">String</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">        s.chars()</span><br><span class="line">            .enumerate()</span><br><span class="line">            .fold(HashMap::new(), |<span class="keyword">mut</span> m, (index, ch)| &#123;</span><br><span class="line">                m.entry(ch)</span><br><span class="line">                    .and_modify(|(_, i): &amp;<span class="keyword">mut</span> (<span class="built_in">usize</span>, <span class="built_in">i32</span>)| *i += <span class="number">1</span>)</span><br><span class="line">                    .or_insert((index, <span class="number">1</span>));</span><br><span class="line">                m</span><br><span class="line">            &#125;)</span><br><span class="line">            .values()</span><br><span class="line">            .fold(-<span class="number">1</span>, |ans, &amp;(index, count)| &#123;</span><br><span class="line">                <span class="keyword">if</span> count == <span class="number">1</span> &amp;&amp; (ans == -<span class="number">1</span> || (index <span class="keyword">as</span> <span class="built_in">i32</span>) &lt; ans) &#123;</span><br><span class="line">                    index <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ans</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
            </article>
        </div>

        <div class="col"></div>
    </div>
</div>
    <footer class="h-25"> footer </footer>
</body>

</html>