<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">

    
<link rel="stylesheet" href="/blog-theme/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/blog-theme/css/global.css">

    
<link rel="stylesheet" href="/blog-theme/css/article.css">

    
    
<script src="/blog-theme/bootstrap/js/bootstrap.bundle.min.js"></script>


    <title>
        I&#39;m prime
    </title>
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="bg-dark">
    <header>
    <nav class="navbar navbar-expand navbar-expand-lg navbar-dark sticky-top shadow">
        <div class="container-fluid">
            <a class="navbar-brand" href="/blog-theme/">

                

            I&#39;m prime
            </a>

            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">

                    

                        <li class="nav-item">
                            <a class="nav-link " aria-current="page"
                                href="/blog-theme/">
                                主页
                            </a>
                        </li>

                    

                        <li class="nav-item">
                            <a class="nav-link " aria-current="page"
                                href="/blog-theme/archives/">
                                归档
                            </a>
                        </li>

                    

                </ul>
            </div>
        </div>
    </nav>
</header>
    <div class="container-fluid mt-md-5">
    <div class="row">
        <div class="col"></div>
        <div class="col-12 col-sm-10 col-md-8 col-lg-7 col-xl-5 shadow-lg">
            <div class="container-fluid mt-5 text-center">
                <h1 class="text-white">
                    684. 冗余连接(每日一题)
                </h1>
                <p class="mt-2 text-secondary">
                    2021.01.13
                </p>
            </div>

            <article class="container-fluid text-white">
                <h2 id="leetcode-笔记"><a href="#leetcode-笔记" class="headerlink" title="leetcode 笔记"></a><a href="https://lzyprime.github.io/leetcode/leetcode">leetcode 笔记</a></h2><hr>
<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>在本问题中, 树指的是一个连通且无环的无向图。</p>
<p>输入一个图，该图由一个有着N个节点 (节点值不重复1, 2, …, N) 的树及一条附加的边构成。附加的边的两个顶点包含在1到N中间，这条附加的边不属于树中已存在的边。</p>
<p>结果图是一个以边组成的二维数组。每一个边的元素是一对[u, v] ，满足 u &lt; v，表示连接顶点u 和v的无向图的边。</p>
<p>返回一条可以删去的边，使得结果图是一个有着N个节点的树。如果有多个答案，则返回二维数组中最后出现的边。答案边 [u, v] 应满足相同的格式 u &lt; v。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">示例 1：</span><br><span class="line"></span><br><span class="line">输入: [[1,2], [1,3], [2,3]]</span><br><span class="line">输出: [2,3]</span><br><span class="line">解释: 给定的无向图为:</span><br><span class="line">  1</span><br><span class="line"> / \</span><br><span class="line">2 - 3</span><br><span class="line">示例 2：</span><br><span class="line"></span><br><span class="line">输入: [[1,2], [2,3], [3,4], [1,4], [1,5]]</span><br><span class="line">输出: [1,4]</span><br><span class="line">解释: 给定的无向图为:</span><br><span class="line">5 - 1 - 2</span><br><span class="line">    |   |</span><br><span class="line">    4 - 3</span><br><span class="line">注意:</span><br><span class="line"></span><br><span class="line">输入的二维数组大小在 3 到 1000。</span><br><span class="line">二维数组中的整数在1到N之间，其中N是输入数组的大小。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/redundant-connection">https://leetcode-cn.com/problems/redundant-connection</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。  </p>
</blockquote>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><p>又是并查集。合并时，将小堆向大堆合并。</p>
<ul>
<li><h3 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h3></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">findRedundantConnection</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; edges)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> size = edges.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">par</span><span class="params">(size + <span class="number">1</span>, <span class="number">-1</span>)</span>, <span class="title">qu</span><span class="params">(size + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; i : edges) &#123;</span><br><span class="line">      <span class="keyword">int</span> p1 = <span class="built_in">find_parent</span>(par, i[<span class="number">0</span>]);</span><br><span class="line">      <span class="keyword">int</span> p2 = <span class="built_in">find_parent</span>(par, i[<span class="number">1</span>]);</span><br><span class="line">      <span class="keyword">if</span> (p1 == p2) <span class="keyword">return</span> i;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (qu[p1] &lt; qu[p2]) <span class="built_in">swap</span>(p1, p2);</span><br><span class="line">      par[p2] = p1;</span><br><span class="line">      qu[p1]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> edges.<span class="built_in">back</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">find_parent</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; par, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (par[x] != <span class="number">-1</span> &amp;&amp; par[x] != x)</span><br><span class="line">      <span class="keyword">return</span> par[x] = <span class="built_in">find_parent</span>(par, par[x]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> par[x] = x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="kotlin"><a href="#kotlin" class="headerlink" title="kotlin"></a>kotlin</h3></li>
</ul>
<p>一刀流</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">findRedundantConnection</span><span class="params">(edges: <span class="type">Array</span>&lt;<span class="type">IntArray</span>&gt;)</span></span>: IntArray = edges.fold(Array(edges.size + <span class="number">1</span>) &#123; -<span class="number">1</span> &#125; to edges.last()) &#123; (par, ans), i -&gt; <span class="keyword">if</span> (par.findParent(i[<span class="number">0</span>]) == par.findParent(i[<span class="number">1</span>])) <span class="keyword">return</span> i <span class="keyword">else</span> par.apply &#123; <span class="keyword">this</span>[findParent(par[i[<span class="number">0</span>]])] = findParent(par[i[<span class="number">1</span>]]) &#125; to ans &#125;.second</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> Array<span class="type">&lt;Int&gt;</span>.<span class="title">findParent</span><span class="params">(x: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>[x] != -<span class="number">1</span> &amp;&amp; <span class="keyword">this</span>[x] != x) <span class="keyword">this</span>[x] = findParent(<span class="keyword">this</span>[x]) <span class="keyword">else</span> <span class="keyword">this</span>[x] = x; <span class="keyword">return</span> <span class="keyword">this</span>[x]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">findRedundantConnection</span><span class="params">(edges: <span class="type">Array</span>&lt;<span class="type">IntArray</span>&gt;)</span></span>: IntArray =</span><br><span class="line">        edges.fold(Array(edges.size + <span class="number">1</span>) &#123; -<span class="number">1</span> &#125; to edges.last()) &#123; (par, ans), i -&gt;</span><br><span class="line">            <span class="keyword">if</span> (par.findParent(i[<span class="number">0</span>]) == par.findParent(i[<span class="number">1</span>])) <span class="keyword">return</span> i <span class="keyword">else</span> par.apply &#123;</span><br><span class="line">                <span class="keyword">this</span>[findParent(par[i[<span class="number">0</span>]])] = findParent(par[i[<span class="number">1</span>]])</span><br><span class="line">            &#125; to ans</span><br><span class="line">        &#125;.second</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="scala"><a href="#scala" class="headerlink" title="scala"></a>scala</h3></li>
</ul>
<p>一刀流</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">find_parent</span></span>(par: <span class="type">Array</span>[<span class="type">Int</span>], x: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    par(x) = <span class="keyword">if</span> (par(x) != <span class="number">-1</span> &amp;&amp; par(x) != x) find_parent(par, par(x)) <span class="keyword">else</span> x</span><br><span class="line">    par(x)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">findRedundantConnection</span></span>(edges: <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">Int</span>]]): <span class="type">Array</span>[<span class="type">Int</span>] = &#123;</span><br><span class="line">    edges.fold(<span class="type">Array</span>.fill(edges.length + <span class="number">1</span>)(<span class="number">-1</span>)) &#123; (par, i) =&gt;</span><br><span class="line">      <span class="keyword">if</span> (find_parent(par, i.head) == find_parent(par, i.last)) <span class="keyword">return</span> i</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        par(find_parent(par, par(i.head))) = find_parent(par, par(i.last))</span><br><span class="line">        par</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    edges.last</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="rust"><a href="#rust" class="headerlink" title="rust"></a>rust</h3></li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> Solution &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">find_redundant_connection</span></span>(edges: <span class="built_in">Vec</span>&lt;<span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;&gt;) -&gt; <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt; &#123;</span><br><span class="line">        <span class="function"><span class="keyword">fn</span> <span class="title">find_parent</span></span>(par: &amp;<span class="keyword">mut</span> <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt;, x: <span class="built_in">usize</span>) -&gt; <span class="built_in">usize</span> &#123;</span><br><span class="line">            par[x] = <span class="keyword">if</span> par[x] != -<span class="number">1</span> &amp;&amp; par[x] != x <span class="keyword">as</span> <span class="built_in">i32</span> &#123;</span><br><span class="line">                find_parent(par, par[x] <span class="keyword">as</span> <span class="built_in">usize</span>) <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                x <span class="keyword">as</span> <span class="built_in">i32</span></span><br><span class="line">            &#125;;</span><br><span class="line">            par[x] <span class="keyword">as</span> <span class="built_in">usize</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> len = edges.len();</span><br><span class="line">        <span class="keyword">let</span> ans = edges.last().unwrap().clone();</span><br><span class="line">        edges.into_iter().fold((<span class="built_in">vec!</span>[-<span class="number">1</span>; len + <span class="number">1</span>], ans), |(<span class="keyword">mut</span> par, ans), i| &#123;</span><br><span class="line">            <span class="keyword">let</span> p1 = find_parent(&amp;<span class="keyword">mut</span> par, i[<span class="number">0</span>] <span class="keyword">as</span> <span class="built_in">usize</span>);</span><br><span class="line">            <span class="keyword">let</span> p2 = find_parent(&amp;<span class="keyword">mut</span> par, i[<span class="number">1</span>] <span class="keyword">as</span> <span class="built_in">usize</span>);</span><br><span class="line">            <span class="keyword">if</span> p1 == p2 &#123;</span><br><span class="line">                (par, i)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                par[p1] = p2 <span class="keyword">as</span> <span class="built_in">i32</span>;</span><br><span class="line">                (par, ans)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
            </article>
        </div>

        <div class="col"></div>
    </div>
</div>
    <footer class="h-25"> footer </footer>
</body>

</html>